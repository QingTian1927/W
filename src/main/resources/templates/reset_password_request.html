<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>W - Reset Password</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" th:href="@{/css/colors.css}">
</head>
<body class="w-svw h-svh flex justify-center items-center bg-accent text-dark">
<main class="h-max w-[80%] sm:w-[70%] lg:w-[60%] p-6 rounded-xl shadow-lg bg-lighter">
    <header class="min-h-16 w-full mb-9">
        <h1 class="mb-1.5 font-bold text-4xl">Change Password</h1>
        <p class="text-pretty">Enter a new password to log into your account</p>
    </header>
    <form id="form" th:action="@{/reset-password/request/{id}/process(id=${request.getId()})}" method="POST" class="w-full m-0 mb-9">
        <label for="password" class="w-full">
            <span class="font-medium text-darker">New Password</span>
            <input type="password" id="password" name="password" autocomplete="new-password" required
                   placeholder="*********" class="w-full px-3 py-1.5 mt-1.5 mb-3 rounded-md bg-light-faded text-lg">
        </label>

        <label for="repeat-password" class="w-full">
            <span class="font-medium text-darker">Confirm Password</span>
            <input type="password" id="repeat-password" name="repeat-password" autocomplete="new-password" required
                   placeholder="*********" class="w-full px-3 py-1.5 mt-1.5 rounded-md bg-light-faded text-lg">
        </label>

        <button id="submit-button" type="submit" class="w-full mt-6 p-2 rounded-full font-medium btn-accent">
            Change Password
        </button>

        <script th:inline="javascript">
            document.getElementById("submit-button").addEventListener("click", (e) => {
                e.preventDefault();
                const passwordInput = document.getElementById("password");
                const repeatPasswordInput = document.getElementById("repeat-password");

                if (passwordInput.value !== repeatPasswordInput.value) {
                    alert("Password does not match with Repeat Password!");
                    return;
                }

                document.getElementById("form").submit();
            });
        </script>
    </form>

    <p class="text-center">
        Not registered yet? <a th:href="@{/signup}" class="text-success no-underline hover:underline">Sign up now</a>
    </p>
</main>
</body>
</html>